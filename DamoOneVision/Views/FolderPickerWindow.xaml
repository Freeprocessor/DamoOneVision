<Window x:Class="DamoOneVision.Views.FolderPickerWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"                      
        Title="폴더 선택"
        WindowStartupLocation="CenterOwner"
        WindowStyle="None"
        Background="{DynamicResource MaterialDesignPaper}"
        d:DesignHeight="720"
        d:DesignWidth="540">

    <Border Padding="24" Background="{DynamicResource MaterialDesignPaper}" >
        <ScrollViewer VerticalScrollBarVisibility="Auto"  PanningMode="VerticalOnly">
            <ItemsControl ItemsSource="{Binding FolderItems}">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <UniformGrid Columns="3" />
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <!-- 한 타일 -->
                        <Grid Width="180" Margin="8">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*" />
                                <!-- 이미지 -->
                                <RowDefinition Height="Auto"/>
                                <!-- 날짜 라벨 -->
                            </Grid.RowDefinitions>

                            <!-- ① 썸네일 -->
                            <Border Grid.Row="0"
                    CornerRadius="6"
                    BorderThickness="1"
                    BorderBrush="{DynamicResource PrimaryHueMidBrush}">
                                <Image Source="{Binding Thumbnail}"
                       Stretch="UniformToFill"
                       Height="160" Width="180"/>
                            </Border>

                            <!-- ② 폴더명(날짜) -->
                            <TextBlock Grid.Row="1"
                       Text="{Binding Name}"          
                       FontSize="16"
                       FontWeight="SemiBold"
                       HorizontalAlignment="Center"
                       Margin="0,6,0,0"/>
            
            <!-- 터치 선택 -->
                        <Button Command="{Binding DataContext.SelectFolderCommand,
                                      RelativeSource={RelativeSource AncestorType=Window}}"
                    CommandParameter="{Binding Path}"
                    Background="Transparent"
                    BorderThickness="0"/>
        </Grid>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>
    </Border>
</Window>
